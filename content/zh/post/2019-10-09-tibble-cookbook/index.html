---
title: tibble cookbook
author: Xiaotao Shen
date: '2019-11-09'
slug: tibble-cookbook
categories:
  - R
tags:
  - Blog
  - Chinese
image:
  caption: ''
  focal_point: ''
---



<div id="tibble显示控制" class="section level1">
<h1>tibble显示控制</h1>
<p>tibble默认情况下只输出前十行内容,列自动适应屏幕宽度,如果想要输出比默认更多的数据,有以下几种方法.</p>
<div id="使用print函数" class="section level2">
<h2>使用<code>print()</code>函数</h2>
<p>使用<code>print()</code>函数,可以控制行数和列数.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## Warning: package &#39;tidyverse&#39; was built under R version 3.6.1</code></pre>
<pre><code>## -- Attaching packages ------------------------------------------------------------------------------ tidyverse 1.2.1 --</code></pre>
<pre><code>## v ggplot2 3.2.1     v purrr   0.3.2
## v tibble  2.1.3     v dplyr   0.8.3
## v tidyr   1.0.0     v stringr 1.4.0
## v readr   1.3.1     v forcats 0.4.0</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 3.6.1</code></pre>
<pre><code>## Warning: package &#39;tibble&#39; was built under R version 3.6.1</code></pre>
<pre><code>## Warning: package &#39;tidyr&#39; was built under R version 3.6.1</code></pre>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 3.6.1</code></pre>
<pre><code>## -- Conflicts --------------------------------------------------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code># 默认显示
nycflights13::flights</code></pre>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # ... with 336,766 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<pre class="r"><code># 输出15行及所有列数
nycflights13::flights %&gt;% 
  print(n = 15, width = Inf)</code></pre>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## 11  2013     1     1      558            600        -2      849
## 12  2013     1     1      558            600        -2      853
## 13  2013     1     1      558            600        -2      924
## 14  2013     1     1      558            600        -2      923
## 15  2013     1     1      559            600        -1      941
##    sched_arr_time arr_delay carrier flight tailnum origin dest  air_time
##             &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;
##  1            819        11 UA        1545 N14228  EWR    IAH        227
##  2            830        20 UA        1714 N24211  LGA    IAH        227
##  3            850        33 AA        1141 N619AA  JFK    MIA        160
##  4           1022       -18 B6         725 N804JB  JFK    BQN        183
##  5            837       -25 DL         461 N668DN  LGA    ATL        116
##  6            728        12 UA        1696 N39463  EWR    ORD        150
##  7            854        19 B6         507 N516JB  EWR    FLL        158
##  8            723       -14 EV        5708 N829AS  LGA    IAD         53
##  9            846        -8 B6          79 N593JB  JFK    MCO        140
## 10            745         8 AA         301 N3ALAA  LGA    ORD        138
## 11            851        -2 B6          49 N793JB  JFK    PBI        149
## 12            856        -3 B6          71 N657JB  JFK    TPA        158
## 13            917         7 UA         194 N29129  JFK    LAX        345
## 14            937       -14 UA        1124 N53441  EWR    SFO        361
## 15            910        31 AA         707 N3DUAA  LGA    DFW        257
##    distance  hour minute time_hour          
##       &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
##  1     1400     5     15 2013-01-01 05:00:00
##  2     1416     5     29 2013-01-01 05:00:00
##  3     1089     5     40 2013-01-01 05:00:00
##  4     1576     5     45 2013-01-01 05:00:00
##  5      762     6      0 2013-01-01 06:00:00
##  6      719     5     58 2013-01-01 05:00:00
##  7     1065     6      0 2013-01-01 06:00:00
##  8      229     6      0 2013-01-01 06:00:00
##  9      944     6      0 2013-01-01 06:00:00
## 10      733     6      0 2013-01-01 06:00:00
## 11     1028     6      0 2013-01-01 06:00:00
## 12     1005     6      0 2013-01-01 06:00:00
## 13     2475     6      0 2013-01-01 06:00:00
## 14     2565     6      0 2013-01-01 06:00:00
## 15     1389     6      0 2013-01-01 06:00:00
## # ... with 3.368e+05 more rows</code></pre>
</div>
<div id="修改options默认参数" class="section level2">
<h2>修改<code>options()</code>默认参数</h2>
<ul>
<li><p><code>options(tibble.print_max = n, tibble.pring_min = m)</code>:如果多于m行,则只打印出n
行.<code>options(tibble.print_min = Inf)</code>表示总是打印所有行.</p></li>
<li><p><code>options(tibble.width = Inf)</code>表示总是打印所有列,不考虑屏幕的宽度.</p></li>
</ul>
<p><code>options()</code>中所有和<code>tibble</code>相关的参数:</p>
<ol style="list-style-type: decimal">
<li><p><code>tibble.print_max</code>:Row number threshold: Maximum number of rows printed. Set to Inf to always print all rows. Default: 20.</p></li>
<li><p><code>tibble.print_min</code>: 如果设置为m,意思即为如果行数大于m,则只打印出前n行.</p></li>
<li><p><code>tibble.width</code>: 打印列的宽度.默认为NULL,也就是适应屏幕宽度.设置为<code>Inf</code>,则打印出全部列.</p></li>
<li><p><code>tibble.max_extra_cols</code>: Number of extra columns printed in reduced form. Default: 100.</p></li>
<li><p><code>pillar.bold</code>: pillar是柱子的意思.如果设置为TRUE,则列名为粗体,默认为FALSE,因为在terminal中很多字体对粗体支持不够.</p></li>
<li><p><code>pillar.subtle</code>: 是否打印出其他详细的信息,比如总的行和列数.默认为TRUE.</p></li>
<li><p><code>pillar.subtle_num</code>: Use subtle style for insignificant digits? Default: FALSE, is also affected by the pillar.subtle option.</p></li>
<li><p><code>pillar.neg</code>: 是否高亮负值.默认为TRUE.</p></li>
<li><p><code>pillar.sigfig</code>: 高亮那些数字,比如如果设置为3,则会高亮数字3.</p></li>
<li><p><code>pillar.min_title_chars</code>: 列名打印时最小的字符数,默认为15.意味着如果某些列名大于15,则会被截断.设置为<code>Inf</code>,打印出完整的列名.</p></li>
</ol>
</div>
</div>
