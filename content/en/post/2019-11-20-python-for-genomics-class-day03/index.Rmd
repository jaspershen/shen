---
title: Python for genomics class day03
author: Xiaotao Shen
date: 2019-11-20
slug: ''
categories:
 -  Python
tags:
 -  Blog
 -  Chinese
image:
  caption: ''
  focal_point: ''
output:
  blogdown::html_page:
    toc: true
    number_sections: true
---

```{r setup, include=FALSE}
library(reticulate)
```


# 数据类型

Data types and manipulations: dictionary, set

Conditional statements: if, elif, else, break, continue

Comments and style: [https://realpython.com/python-pep8/]


```{python}

# Python style
#
# PEP8
# https://realpython.com/python-pep8/
# https://www.python.org/dev/peps/pep-0008/
#
# Python history
#
# Guido van Rossum, creator in 1989. He retired last month. Final job was with Dropbox.
# https://en.wikipedia.org/wiki/Python_(programming_language)

a = 1
b = 1.0
c = '1'
d = [1, 2]
e = (1, 2)
f = { 'x': 1, 'y': 2}
g = {1, 2}

#a是int整数型
print('a =', type(a))
#b是浮点型(float)
print('b =', type(b))
#c是字符串型(str)
print('c =', type(c))
#d是列表,可以看到列表使用中括号创建
print('d =', type(d))
#e是元组(tuple),使用小括号创建
print('e =', type(e))
#f是字典类型(dict),使用大括号创建
print('f =', type(f))
#g是集合类型,也是使用大括号创建,但是没有key
print('g =', type(g))

```

对几个重要的类型做一个详细解释.具体内容参考`Python基础教程这本书`

## 列表(list)和元组(tuple)

列表和元组是非常类似的,不同点在于`列表可以修改而元组不可以`.

### 创建列表

可以使用中括号`[]`来创建列表

```{python}
edward = ['Edward Gumby', 42]
john = ['John Smith', 50]
database = [edward, john]
database
```

同样的,列表中的元素也可以是列表,就像上面的例子所展示的.

```{python}
test = ["shen"]
type(test)
test[0]
```


### 列表通用的操作

有几种操作适用于所有序列,包括索引,切片,相加,相乘和成员资格检查.另外,Python还提供了一些内置函数,可用于确定序列的长度以及找出序列中最大和最小的元素.

#### 索引(index)

与R类型,列表都有序号,但是需要注意的是,python中的序号都是从0开始的.

```{python}
greeting = 'Hello'
greeting[0]
greeting[1]
```

注意上面例子中`greeting`的类型是`str`,也就是说python中的str也可以通过序号进行提取某个字符.

这就称之为索引,其中使用`-1`代表最后一个元素.

```{python}
greeting[-1]
```

#### 切片(slicing)

切片是用来访问特定范围内的元素.为此,可使用两个索引,并用冒号分隔.

```{python}
test = ["shen", "wang", "zhao", "qian", "sun"]
test[0]
test[0:1]
test[1:3]
test[1:-1]
test[1:]
```

通过上面例子可以看到,对于切片的两个索引,出来的结果包含左边索引的结果,而不包含右边index的结果.如果需要包含某一边的所有结果,则只需要将冒号的某一边空出来即可.

当然也可以使用负数来进行索引,因为我们知道-1是最后一个元素,-2是倒数第二个元素.

```{python}
test = [1,2,3,4,5]
test[-3:-1]
test[-3:0]
test[-3:]
```

可以看到如果执行切片操作时,第一个索引指定的元素位于第二个索引指定的元素后面,结果就为空序列.

#### 序列相加

可以使用加法运算符来拼接序列.

```{python}
[1, 2, 3] + [4, 5, 6]
'Hello,' + 'world!'
```

从错误消息可知,不能拼接列表和字符串,,虽然它们都是序列.一般而言,不能拼接不同类型的序列.

#### 乘法

将序列与数x相乘时,将重复这个序列x次来创建一个新序列:

```{python}
'python' * 5
[1,2,3] * 5
```

**None,空列表和初始化**

空列表是使用不包含任何内容的两个方括号([])表示的.如果要创建一个可包含10个元素的列表,但没有任何有用的内容,可像前面那样使用`[42]*10`.但更准确的做法是使用`[0]*10`,这将创建一个包含10个零的列表.但是更为准确合适的作发是使用`None`,在python中,`None`代表什么都没有.

```{python}
None
[None]
sequence = [None] * 10
sequence
```

#### 成员资格

要检查特定的值是否存在与序列中,可以使用判断运算符`in`.返回值为逻辑值,满足时返回为`True`,不满足时返回`False`.

```{python}
permisions = "rw"

'w' in permisions

'T' in permisions

users = ["shen", "wang"]#一个列表
'wang' in users
'tao' in users
```

#### 长度,最大值和最小值

使用内置函数可以得到一个列表的长度,最大值及最小值.

```{python}
number = [1,2,3,4]#列表
len(number)
max(number)
min(number)
string = ["a", 1 ,2,3]
string
# len(string)
# max(string)
len("shen")
len(["shen"])
```

### 列表,Python的主力

列表是Python中使用非常广泛的类型.

#### `list()`函数

`list()`函数可以用来简历列表.

```{python}
list("shen")
list([1,2,3])
```

列表是可以改变的.


#### 列表的基本操作

列表的最大有点在于它是可以修改的.

##### 修改列表:给元素赋值

```{python}
x = [1,2,3]
x
x[2] = 5
x
```

##### 删除列表中的元素

使用`del`语句可以删除列表中的某个元素.

```{python}
names = ["alice", "beth", "cecil"]
del names[1]
names
```

##### 使用切片对多个元素进行修改

```{python}
name = list("name")
name
name[2:] = list("shen")
name
name[4:] = list("wa")
name
```

需要注意的是,使用切片进行赋值或者修改,是可以将其替换为不同长度的东西的.

```{python}
test = list("wang")
test
test[2:] = list("shen")
test
test[2:3]
test[2:3] = list("shen")
test
```

还可以使用这个特性进行元素的插入:

```{python}
numbers = [1, 5]
numbers
numbers[1:1]##这是一个空列表
numbers[1:1] = [2, 3, 4]#在第二个位置开始,插入新的list
numbers
```

当然,还可以利用这个特性删除切片.

```{python}
numbers
numbers[1:4]
numbers[1:4] = []
numbers
```


当然,删除仍然可以使用`del`语句实现,最后结果是一致的.

##### 列表方法

方法是与某列对象联系紧密的函数,一般使用下列方法进行调用:

```
object.method(arguments)
```

这也是跟R不同的一点,R中并没有这类方法.

1. `append`

用于将一个对象添加到列表末尾.

```{python}
test = [1,2,3]
test
test.append(2)
test
test.append([5,6,7])
test
test.append(10)
test
test + [20]
test + [10,20]
```

2. `clear`

用来清空列表的内容.

```{python}
test = [1,2,3]
test.clear()
test
```

完全清空所有的内容.

3. `copy`

用来复制列表.在Python中,直接使用`=`将一个列表赋值给另外一个对象名,其实只是关联而已,也就是说其实同一个列表关联到了两个名字而已.

```{python}
a = [1,2,3]
b = a
b[1] = 10
b
a##a也会改变,和b保持一致
```

想要把a和b指向两个独立的不同的列表,需要使用`copy`,将b关联到a的副本.


```{python}
a = [1,2,3]
b = a.copy()
b[1] = 10
b
a
```

4. `count`

用来统计指定的元素在列表中出现的次数.

```{python}
a = [1,2,3,4,4]
a.count(1)
a.count(4)
```

`count()`一共有两个参数,第一个参数为'self',也就是前面的对象,后买你的参数为`value`指定要统计的元素.

5. `extend`

这个方法跟`append`的区别在于,它可以将一个独立的列表添加到列表后面.

```{python}
a = [1,2,3]
b = [4,5,6]
a.extend(b)
a
a.append(b)
a
a + b
a
```

需要注意这几种方法的区别.

6. `index`

用于查找列表中指定值第一次出现的索引.

```{python}
test = list("shen")
test
test.index("h")
```

7. `insert`

将一个对象插入到列表中.

```{python}
a = [1,2,3]
a
a.insert(1, "four")
a
a.insert(0, [1, "shen"])
a
```

`insert`第一个参数用来指定需要插入的位置(索引),第二个参数用来指定需要插入的内容.插入的内容可以是单个元素,也可以是列表.

8. `pop`

删除一个元素,默认为最后一个.修改原列表,并返回删除的元素.

```{python}
x = [1,2,3]
x.pop()
x
```

当然,也可以使用`index'`参数,指定需要删除的元素.

9. `remove`

用于删除第一个为指定值的元素.

```{python}
test = list("shen")
test.remove("h")
test
```

需要注意的是,只删除第一个符合要求的元素,其他的不会删除.

10. `reverse`

将元素顺序按相反顺序重新排列.

11. `sort`

对列表元素重新进行排列.

```{python}
x = ['aardvark', 'abalone', 'acme', 'add', 'aerate', "shen", "wang", "china", "us"]
x.sort()
x
```

`sort`函数还可以通过设置`key`参数来自定义排列规则,如可以将`key`设置为函数`len`,从而将列表按照元素的擦汗高长度进行排序.

```{python}
x.sort(key = len)
x
```

#### 元组(tuple):不可修改的序列

元组也是序列,但是跟列表不同的是,**元组是不能修改的.**

##### 创建元组

使用小括号(())可以创建元组.

```{python}
x = (1,2,3)
x
type(x)
()#空元组
```

创建只含有一个元素的元组比较特殊,需要在元素后面加上逗号.如果不加逗号,不能常见元组.

```{python}
x = (42)
x
type(x)
y = (x, )
y
type(y)

3 * (10+3)
3 * (10+3,)
```

看了上面的例子,可以很好的明白为什么需要加上逗号,因为小括号在数学运算中还表示运算优先级的意思,所以需要使用逗号来区分是进行数学运算,还是要创建元组.

当然,和列表一样,我们还可以使用`tuple()`函数来创建元组.

```{python}
tuple([1, 2, 3])
tuple("shen")
```

你可能意识到了,元组并不太复杂,而且除创建和访问其元素外,可对元组执行的操作不多.元组的创建及其元素的访问方式与其他序列相同.

那为什么要单独出来一个元组类型呢?有两个原因:

1. 它们用作映射中的键(以及集合的成员),而列表不行.

2. 有些内置函数和方法返回元组,这意味着必须跟它们打交道.只要不尝试修改元组,与元组打交道通常意味着像处理列表一样处理它们(需要使用元组没有的index和count等方法时例外).

### 总结

新的函数:

Function|Meaning
--------|-------
len(seq)|返回序列长度
list(seq)|将序列转换为列表
max(args)|返回序列或者一组参数中的最大值
min(args)|返回序列或者一组参数中的最小值
reversed(seq)|反向排列序列
sorted(seq)|对列表或者序列进行排序
tuple(seq)|将序列转换为元组


列表(list)的方法

Method|Meaning
--------|-------
append|将一个对象附加到列表末尾
clear|清空列表的内容
copy|复制列表
count|计算指定的元素在列表中出现了多少次
extend|同时将多个值附加到列表末尾
index|在列表中查找指定值第一次出现的索引
insert|将一个对象插入列表
pop|从列表中删除一个元素(默认为最后一个元素)
remove|用于删除第一个为指定值的元素
reverse|按相反的顺序排列列表中的元素
sort|对列表进行排序

## 字符串

### 字符串的基本操作

所有的标准序列操作(索引,切片,乘法,成员资格检查,长度,最小值和最大值)都适用于字符串.但是注意字符串是不可变的.

#### 字符串方法

字符串的方法要多得多,很多都是从模块string那继承过来的.

介绍一些比较常用的.

##### `center`

通过在两边添加填充字符(默认为空格)让字符串居中.

```{python}
"The Middle by Jimmy Eat World".center(40)
"The Middle by Jimmy Eat World".center(40, "*")
```

##### `find`

在字符串中查找子串,如果找到,就返回字串的第一个字符的索引,否则返回-1.

```{python}
'With a moo-moo here, and a moo-moo there'.find('moo')
'With a moo-moo here, and a moo-moo there'.find('shen')
```

你还可指定搜索的起点和终点.

```{python}
subject = '$$$ Get rich now!!! $$$'
subject
subject.find('$$$')
subject.find('$$$', 1) # 只指定了起点
subject.find('!!!', 0, 16) # 同时指定了起点和终点
```

请注意,起点和终点值(第二个和第三个参数)指定的搜索范围包含起点,但不包含终点.这是Python惯常的做法.

另外的和`find`相关的方法还包括:

`rfind`,`index`,`rindex`,`count`,`startswith`和`endswith`.

##### `join`

`join`是一个非常重要的字符串方法,其作用与split相反,用于合并序列的元素.


```{python}
seq = list("shen")
seq
sep = '+'
sep
sep.join(seq)
```

这个方法跟R中的`paste`函数非常类似.

注意,所合并序列的元素必须都是字符串.如果list元素都是数字,是会报错的.

##### `lower`

返回字符串的小写版本.

```{python}
'Trondheim Hammer Dance'.lower()
```

类似或者同一类方法还有:

`islower`,`istitle`,`isupper`,`translate`,`capitalize`,`casefold`,`swapcase`,`title`,`upper`.

##### `replace`

将指定子串都替换为另一个字符串,并返回替换后的结果.

```{python}
'This is a test'.replace('is', 'eez')
```
一共两个参数,第一个是需要替换的内容,第二个是替换之后的内容.

到这里应该发现,其实这就是R中的`stringr`包所要做的工作.

另外还需要参考的函数:

`tranlate`和`expandtabs`.

##### `split`

其和`join`作用相反,用于将字符串拆分为序列.

```{python}
'1+2+3+4+5'.split('+')
'Using the default'.split()
```

可以看到,默认拆分的标识符是空格( ).

##### `strip`

用于将字符串的开头和末尾的空白删除.

```{python}
' internal whitespace is kept '.strip()
```

当然,还可以通过设置参数,来指定删除的字符类型.

```{python}
'*** SPAM * for * everyone!!! ***'.strip(' *!')
```

但是还是只能删除开头和末尾.

相似函数或者方法:

`lstrip`和`rstrip`.

##### `translate`

方法`translate`与`replace`一样替换字符串的特定部分,但不同的是它只能进行单字符替换.这个方法的优势在于能够同时替换多个字符,因此效率比replace高.

使用`translate`前必须创建一个转换表.这个转换表指出了不同`Unicode`码点之间的转换关系.要创建转换表,可对字符串类型`str`调用方法`maketrans`,这个方法接受两个参数:两个长度相同的字符串,它们指定要将第一个字符串中的每个字符都替换为第二个字符串中的相应字
符.

```{python}
table = str.maketrans('cs', 'kz')
table
type(table)
```

可以看到,转换表是一个字典类型.

```{python}
'this is an incredible test'.translate(table)
```

##### 判断字符串是否满足某些特定的条件

很多字符串方法都以is打头,如`isspace`,`isdigit`和`isupper`,它们判断字符串是否具有特定的性质(如包含的字符全为空白,数字或大写).如果字符串具备特定的性质,这些方法就返回True,否则返回False.

参考其他函数:

`isalnum`,`isalpha`,`isdecimal`,`isdigit`,`isidentifier`,`islower`,`isnumeric`,`isprintable`,`isspace`,`istitle`,`isupper`.

#### 总结

将字符串的方法总结如下:

Method|Meanings
------|--------
`string.capitalize()`|返回字符串的副本,但将第一个字符大写.
`string.casefold()`|返回经过标准化后的字符串,标准化类似于转换为小写,但更适合用于对Unicode字符串进行不区分大小写的比较
string.center(width[, fillchar])|返回一个长度为(len(string), width)的字符串.这个字符串的中间包含当前字符串,但两端用`fillchar`指定的字符(默认为空格)填充
string.count(sub[, start[, end]])|计算子串sub出现的次数,可搜索范围限定为string[start:end]
string.encode([encoding[,errors]])|返回使用指定编码和errors指定的错误处理方式对字符串进行编码的结果,参数errors的可能取值包含'strict','ignore','replace'等
string.endswith(suffix[,start[,end]])|检查字符串是否以suffix结尾,还可使用索引start和end来指定匹配范围
string.expandtabs([tabsize])|返回将字符串中的制表符展开为空格后的结果,可指定可选参数tabsize(默认为8)
string.find(sub[, start[, end]])|返回找到的第一个子串sub的索引,如果没有找到这样的子串,就返回-1;还可将搜索范围限制为string[start:end]
string.format(...)|实现了标准的Python字符串格式设置.将字符串中用大括号分隔的字段替换为相应的参数,再返回结果
string.format_map(mapping)|类似于使用关键字参数调用format,只是参数是以映射的方式提供的
string.index(sub[, start[, end]])|返回找到的第一个子串sub的索引,如果没有找到这样的子串,将引发ValueError异常;还可将搜索范围限制为string[start:end]
string.isalnum()|检查字符串中的字符是否都是字母或数
string.isalpha()|检查字符串中的字符是否都是字母
string.isdecimal()|检查字符串中的字符是否都是十进制数
string.isdigit()|检查字符串中的字符是否都是数字
string.isidentifier()|检查字符串是否可用作Python标识符
string.islower()|检查字符串中的所有字母都是小写的
string.isnumeric()|检查字符串中的所有字符是否都是数字字符
string.isprintable()|检查字符串中的字符是否都是可打印的
string.isspace()|检查字符串中的字符是否都是空白字符
string.istitle()|检查字符串中位于非字母后面的字母都是大写的,且其他所有字母都是小写的
string.isupper()|检查字符串中的字母是否都是大写的
string.join(sequence)|将string与sequence中的所有字符串元素合并,并返回结果
string.ljust(width[, fillchar])|返回一个长度为max(len(string), width)的字符串,其开头是当前字符串的副本,而末尾是使用fillchar指定的字符(默认为空格)填充的
string.lower()|将字符串中所有的字母都转换为小写,并返回结果
string.lstrip([chars])|将字符串开头所有的chars(默认为所有的空白字符,如空格,制表符和换行符)都删除,并返回结果
str.maketrans(x[,y[,z]])|一个静态方法,它创建一个供translate使用的转换表.如果只指定了参数x,它必须是从字符或序数到Unicode序数或None(用于删除)的映射;也可使用两个表示源字符和目标字符的字符串调用它;还可提供第三个参数,它指定要删除的字符
string.partition(sep)|在字符串中搜索sep,并返回元组(sep前面的部分, sep, sep后面的部分)
string.replace(old,new[,max])|将字符串中的子串old替换为new,并返回结果;还可将最大替换次数限制为max
string.rfind(sub[,start[,end]])|返回找到的最后一个子串的索引,如果没有找到这样的子串,就返回-1;还可将搜索范围限定为string[start:end]
string.rindex(sub[,start[,end]])|返回找到的最后一个子串sub的索引,如果没有找到这样的子串,就引发ValueError异常;还可将搜索范围限定为string[start:end]
string.rjust(width[,fillchar])|返回一个长度为max(len(string),width)的字符串,其末尾为当前字符串的拷贝,而开头是使用fillchar指定的字符(默认为空格)填充的
string.rpartition(sep)|与partition相同,但从右往左搜索
string.rstrip([chars])|将字符串末尾所有的chars字符(默认为所有的空白字符,如空格,制表符和换行符)都删除,并返回结果
string.rsplit([sep[, maxsplit]])|与split相同,但指定了参数maxsplit,从右往左计算划分次数
string.split([sep[, maxsplit]])|返回一个列表,其中包含以sep为分隔符对字符串进行划分得到的结果(如果没有指定参数sep,将以所有空白字符为分隔符进行划分);还可将最大划分次数限制为maxsplit
string.splitlines([keepends])|返回一个列表,其中包含字符串中的所有行;如果参数keepends为True,将包含换行符
string.startswith(prefix[,start[,end]])|检查字符串是否以prefix打头;还可将匹配范围限制在索引start和end之间
string.strip([chars])|将字符串开头和结尾的所有chars字符(默认为所有空白字符,如空格,制表符和换行符)都删除,并返回结果
string.swapcase() 将字符串中所有字母的大小写都反转,并返回结果
string.title()|将字符串中所有单词的首字母都大写,并返回结果
string.translate(table)|根据转换表table(这是使用maketrans创建的)对字符串中的所有字符都进行转换,并返回结果
string.upper() 将字符串中所有的字母都转换为大写,并返回结果
string.zfill(width)|在字符串左边填充0(但将原来打头的+或-移到开头),使其长度为width